# 程序的执行过程

### 内存布局
![mem_struct](https://raw.githubusercontent.com/pangudashu/anywork/master/_img/mem.jpg)
32位经典内存布局，起始1GB地址为内核空间，后面是向下增长的栈空间(Stack)、内存映射(Memery Mapping Region 即:mmap)，向上增长的堆空间(Heap)，最后面是常量段、数据段、代码段

#### 栈
栈由高地址向低地址增长，即越往后分配的栈地址越小

进程地址空间中最顶部的段是栈，大多数编程语言将之用于存储局部变量和函数参数。调用一个方法或函数会将一个新的栈桢（stack frame）压入栈中。栈桢在函数返回时被清理。也许是因为数据严格的遵从LIFO的顺序，这个简单的设计意味着不必使用复杂的数据结构来追踪栈的内容，只需要一个简单的指针指向栈的顶端即可。因此压栈（pushing）和退栈（popping）过程非常迅速、准确。另外，持续的重用栈空间有助于使活跃的栈内存保持在CPU缓存中，从而加速访问。

进程中的每一个线程都有属于自己的栈。

C语言中局部变量并不存储实际的变量名，而是通过偏移量表示，因为在编译的时候编译器已经知道了程序内部有哪些变量，所以在执行之初就将各变量分配在栈上(实际实现偏移esp即可)，然后通过(ebp - N)或(esp + N)访问各变量

#### 常量段、数据段
在C程序中静态/全局变量保存于常量段、数据段，其中未初始化的变量保存在常量段，已初始化的保存在数据段

#### 代码段
代码段保存的是程序执行的命令:jmp、mov、pop、push...




